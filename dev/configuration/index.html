<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Configuration · RegistryCI.jl</title><meta name="title" content="Configuration · RegistryCI.jl"/><meta property="og:title" content="Configuration · RegistryCI.jl"/><meta property="twitter:title" content="Configuration · RegistryCI.jl"/><meta name="description" content="Documentation for RegistryCI.jl."/><meta property="og:description" content="Documentation for RegistryCI.jl."/><meta property="twitter:description" content="Documentation for RegistryCI.jl."/><meta property="og:url" content="https://JuliaRegistries.github.io/RegistryCI.jl/configuration/"/><meta property="twitter:url" content="https://JuliaRegistries.github.io/RegistryCI.jl/configuration/"/><link rel="canonical" href="https://JuliaRegistries.github.io/RegistryCI.jl/configuration/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">RegistryCI.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../guidelines/">Automatic merging guidelines</a></li><li class="is-active"><a class="tocitem" href>Configuration</a><ul class="internal"><li><a class="tocitem" href="#AutoMerge.jl"><span>AutoMerge.jl</span></a></li></ul></li><li><a class="tocitem" href="../private-registries/">Using RegistryCI on your own package registry</a></li><li><a class="tocitem" href="../public/">Public API</a></li><li><a class="tocitem" href="../regexes/">Regexes</a></li><li><a class="tocitem" href="../internals/">Internals (Private)</a></li><li><a class="tocitem" href="../migration-v1/">Migration Guide (AutoMerge v1)</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Configuration</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Configuration</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaRegistries/RegistryCI.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaRegistries/RegistryCI.jl/blob/master/docs/src/configuration.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Configuration"><a class="docs-heading-anchor" href="#Configuration">Configuration</a><a id="Configuration-1"></a><a class="docs-heading-anchor-permalink" href="#Configuration" title="Permalink"></a></h1><h2 id="AutoMerge.jl"><a class="docs-heading-anchor" href="#AutoMerge.jl">AutoMerge.jl</a><a id="AutoMerge.jl-1"></a><a class="docs-heading-anchor-permalink" href="#AutoMerge.jl" title="Permalink"></a></h2><p>AutoMerge.jl provides automatic merging functionality for Julia package registries. The package has been designed with security in mind, separating functionality into two distinct entrypoints with different privilege levels:</p><ul><li><strong><code>check_pr</code></strong>: Validates pull requests by running untrusted code but requires only minimal GitHub permissions (commit status updates and PR read access)</li><li><strong><code>merge_prs</code></strong>: Merges approved pull requests but requires elevated GitHub permissions (repository write access) and does not run untrusted code</li></ul><h3 id="Configuration-Overview"><a class="docs-heading-anchor" href="#Configuration-Overview">Configuration Overview</a><a id="Configuration-Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Configuration-Overview" title="Permalink"></a></h3><p>AutoMerge uses three separate configuration objects to maintain clear separation of concerns:</p><article><details class="docstring" open="true"><summary id="AutoMerge.RegistryConfiguration"><a class="docstring-binding" href="#AutoMerge.RegistryConfiguration"><code>AutoMerge.RegistryConfiguration</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">RegistryConfiguration</code></pre><p>Shared configuration fields used by both PR checking and merging functionality.</p><pre><code class="language-julia hljs">RegistryConfiguration(; kwargs...)
RegistryConfiguration(config::RegistryConfiguration; kwargs...)  # Override constructor</code></pre><p>The second form creates a config with specified fields overridden, e.g., <code>RegistryConfiguration(config; read_only=true)</code>.</p><div class="admonition is-info" id="Note-93e479d685cc1642"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-93e479d685cc1642" title="Permalink"></a></header><div class="admonition-body"><p>New keyword arguments with defaults may be added to this struct in <em>non-breaking</em> releases of AutoMerge.jl. Default values and keyword argument names will not be removed or changed in non-breaking releases, however.</p></div></div><p><strong>Required keyword arguments (&amp; fields)</strong></p><ul><li><code>registry::String</code>: the registry name you want to run AutoMerge on.</li><li><code>authorized_authors::Vector{String}</code>: list of who can submit registration, e.g <code>String[&quot;JuliaRegistrator&quot;]</code>.</li><li><code>authorized_authors_special_jll_exceptions::Vector{String}</code>: a list of users who can submit JLL packages (which have strict rules about allowed dependencies and are subject to <code>new_jll_*_waiting_minutes</code>s instead of <code>new_*_waiting_minutes</code>s).</li><li><code>new_package_waiting_minutes::Dates.Minute</code>: new package waiting period in minutes.</li><li><code>new_jll_package_waiting_minutes::Dates.Minute</code>: new JLL package waiting period in minutes.</li><li><code>new_version_waiting_minutes::Dates.Minute</code>: new package version waiting period in minutes.</li><li><code>new_jll_version_waiting_minutes::Dates.Minute</code>: new JLL package version waiting period in minutes.</li></ul><p><strong>Keyword arguments (&amp; fields) with default values</strong></p><ul><li><code>master_branch::String = &quot;master&quot;</code>: name of <code>master_branch</code>, e.g you may want to specify this to <code>&quot;main&quot;</code> for new GitHub repositories.</li><li><code>error_exit_if_automerge_not_applicable::Bool = false</code>: if <code>false</code>, AutoMerge will not error on PRs made by non-AutoMerge-authorized users</li><li><code>api_url::String = &quot;https://api.github.com&quot;</code>: the registry host API URL.</li><li><code>read_only::Bool = false</code>: run in read only mode.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaRegistries/RegistryCI.jl/blob/9fb6ad296dd970a3a6bf94c26911f4e32a62a9fb/AutoMerge/src/types.jl#L9-L40">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AutoMerge.CheckPRConfiguration"><a class="docstring-binding" href="#AutoMerge.CheckPRConfiguration"><code>AutoMerge.CheckPRConfiguration</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">CheckPRConfiguration</code></pre><p>Configuration struct for checking PR registration validity (security-isolated functionality).</p><pre><code class="language-julia hljs">CheckPRConfiguration(; kwargs...)
CheckPRConfiguration(config::CheckPRConfiguration; kwargs...)  # Override constructor</code></pre><p>The second form creates a config with specified fields overridden, e.g., <code>CheckPRConfiguration(config; check_license=false)</code>.</p><div class="admonition is-info" id="Note-93e479d685cc1642"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-93e479d685cc1642" title="Permalink"></a></header><div class="admonition-body"><p>New keyword arguments with defaults may be added to this struct in <em>non-breaking</em> releases of AutoMerge.jl. Default values and keyword argument names will not be removed or changed in non-breaking releases, however.</p></div></div><p><strong>Keyword arguments (&amp; fields) with default values</strong></p><ul><li><code>master_branch_is_default_branch::Bool = true</code>: if <code>master_branch</code> specified above is the default branch.</li><li><code>suggest_onepointzero::Bool = true</code>: should the AutoMerge comment include a suggestion to tag a 1.0 release for v0.x.y packages.</li><li><code>point_to_slack::Bool = false</code>: should the AutoMerge comment recommend sending a message to the <code>#pkg-registration</code> Julia-Slack channel when auto-merging is not possible.</li><li><code>registry_deps::Vector{String} = String[]</code>: list of registry dependencies, e.g your packages may depend on <code>General</code>.</li><li><code>check_license::Bool = false</code>: check package has a valid license.</li><li><code>check_breaking_explanation::Bool = false</code>: Check whether the PR has release notes (collected via Registrator.jl) with a breaking change explanation.</li><li><code>public_registries::Vector{String} = String[]</code>: If a new package registration has a UUID that matches that of a package already registered in one of these registries supplied here (and has either a different name or different URL) then an error will be thrown. This to prevent AutoMerge from being used for &quot;dependency confusion&quot; attacks on those registries.</li><li><code>environment_variables_to_pass::Vector{String} = String[]</code>: Environment variables to pass to the subprocess that does <code>Pkg.add(&quot;Foo&quot;)</code> and <code>import Foo</code></li><li><code>commit_status_token_name::String = &quot;AUTOMERGE_GITHUB_TOKEN&quot;</code>: Name of the environment variable containing the GitHub token used for PR validation. The token stored in this environment variable needs <code>repo:status</code> permission to set commit statuses and read access to PRs, but does not need write access to the repository.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaRegistries/RegistryCI.jl/blob/9fb6ad296dd970a3a6bf94c26911f4e32a62a9fb/AutoMerge/src/types.jl#L59-L89">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AutoMerge.MergePRsConfiguration"><a class="docstring-binding" href="#AutoMerge.MergePRsConfiguration"><code>AutoMerge.MergePRsConfiguration</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">MergePRsConfiguration</code></pre><p>Configuration struct for merging approved PRs (requires merge permissions).</p><pre><code class="language-julia hljs">MergePRsConfiguration(; kwargs...)
MergePRsConfiguration(config::MergePRsConfiguration; kwargs...)  # Override constructor</code></pre><p>The second form creates a config with specified fields overridden, e.g., <code>MergePRsConfiguration(config; merge_new_packages=false)</code>.</p><div class="admonition is-info" id="Note-93e479d685cc1642"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-93e479d685cc1642" title="Permalink"></a></header><div class="admonition-body"><p>New keyword arguments with defaults may be added to this struct in <em>non-breaking</em> releases of AutoMerge.jl. Default values and keyword argument names will not be removed or changed in non-breaking releases, however.</p></div></div><p><strong>Keyword arguments (&amp; fields) with default values</strong></p><ul><li><code>merge_new_packages::Bool = true</code>: should AutoMerge merge registration PRs for new packages</li><li><code>merge_new_versions::Bool = true</code>: should AutoMerge merge registration PRs for new versions of packages</li><li><code>additional_statuses::Vector{String} = String[]</code>: list of additional commit statuses that must pass before AutoMerge will merge a PR</li><li><code>additional_check_runs::Vector{String} = String[]</code>: list of additional check runs that must pass before AutoMerge will merge a PR</li><li><code>merge_token_name::String = &quot;AUTOMERGE_MERGE_TOKEN&quot;</code>: Name of the environment variable containing the GitHub token used for PR merging. The token stored in this environment variable needs write access to the repository to merge PRs.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaRegistries/RegistryCI.jl/blob/9fb6ad296dd970a3a6bf94c26911f4e32a62a9fb/AutoMerge/src/types.jl#L106-L128">source</a></section></details></article><p>The <code>AutoMerge.AutoMergeConfiguration</code> combines all 3 into one object:</p><article><details class="docstring" open="true"><summary id="AutoMerge.AutoMergeConfiguration"><a class="docstring-binding" href="#AutoMerge.AutoMergeConfiguration"><code>AutoMerge.AutoMergeConfiguration</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">AutoMergeConfiguration</code></pre><p>Combined configuration object containing registry, PR checking, and PR merging settings.</p><pre><code class="language-julia hljs">AutoMergeConfiguration(; registry_config, check_pr_config, merge_prs_config)
AutoMergeConfiguration(config::AutoMergeConfiguration; kwargs...)  # Override constructor</code></pre><p>The second form creates a config with specified sub-configs overridden, e.g., <code>AutoMergeConfiguration(config; registry_config=new_reg_config)</code>.</p><div class="admonition is-info" id="Note-93e479d685cc1642"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-93e479d685cc1642" title="Permalink"></a></header><div class="admonition-body"><p>New keyword arguments with defaults may be added to this struct in <em>non-breaking</em> releases of AutoMerge.jl. Default values and keyword argument names will not be removed or changed in non-breaking releases, however.</p></div></div><p><strong>Keyword arguments &amp; fields</strong></p><ul><li><code>registry_config::RegistryConfiguration</code>: Shared registry settings</li><li><code>check_pr_config::CheckPRConfiguration</code>: PR validation settings</li><li><code>merge_prs_config::MergePRsConfiguration</code>: PR merging settings</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaRegistries/RegistryCI.jl/blob/9fb6ad296dd970a3a6bf94c26911f4e32a62a9fb/AutoMerge/src/types.jl#L142-L162">source</a></section></details></article><h3 id="General-Registry-Configuration"><a class="docs-heading-anchor" href="#General-Registry-Configuration">General Registry Configuration</a><a id="General-Registry-Configuration-1"></a><a class="docs-heading-anchor-permalink" href="#General-Registry-Configuration" title="Permalink"></a></h3><p>The General registry provides a pre-configured setup that can be used as a reference:</p><article><details class="docstring" open="true"><summary id="AutoMerge.general_registry_config"><a class="docstring-binding" href="#AutoMerge.general_registry_config"><code>AutoMerge.general_registry_config</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">AutoMerge.general_registry_config()</code></pre><p>This is the <a href="#AutoMerge.AutoMergeConfiguration"><code>AutoMerge.AutoMergeConfiguration</code></a> object containing shared configuration for the <a href="https://github.com/JuliaRegistries/General">General registry</a>. This configuration is used by both PR checking and merging functionality.</p><div class="admonition is-warning" id="Warning-eb8933780acb395a"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-eb8933780acb395a" title="Permalink"></a></header><div class="admonition-body"><p>The values of the fields chosen here may change in non-breaking releases of AutoMerge.jl at the discretion of the maintainers of the General registry.</p></div></div><p>Here are the settings chosen for General in this version of AutoMerge.jl:</p><pre><code class="language-julia hljs">julia&gt; AutoMerge.general_registry_config()
AutoMerge.AutoMergeConfiguration with:
  registry_config:
    registry: `&quot;JuliaRegistries/General&quot;`
    authorized_authors: `[&quot;JuliaRegistrator&quot;]`
    authorized_authors_special_jll_exceptions: `[&quot;jlbuild&quot;]`
    new_package_waiting_minutes: `Dates.Minute(4320)`
    new_jll_package_waiting_minutes: `Dates.Minute(20)`
    new_version_waiting_minutes: `Dates.Minute(10)`
    new_jll_version_waiting_minutes: `Dates.Minute(10)`
    master_branch: `&quot;master&quot;`
    error_exit_if_automerge_not_applicable: `false`
    api_url: `&quot;https://api.github.com&quot;`
    read_only: `false`
  check_pr_config:
    master_branch_is_default_branch: `true`
    suggest_onepointzero: `false`
    point_to_slack: `true`
    registry_deps: `String[]`
    check_license: `true`
    check_breaking_explanation: `true`
    public_registries: `[&quot;https://github.com/HolyLab/HolyLabRegistry&quot;, &quot;https://github.com/cossio/CossioJuliaRegistry&quot;]`
    environment_variables_to_pass: `String[]`
    commit_status_token_name: `&quot;AUTOMERGE_GITHUB_TOKEN&quot;`
  merge_prs_config:
    merge_new_packages: `true`
    merge_new_versions: `true`
    additional_statuses: `String[]`
    additional_check_runs: `String[]`
    merge_token_name: `&quot;AUTOMERGE_MERGE_TOKEN&quot;`
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaRegistries/RegistryCI.jl/blob/9fb6ad296dd970a3a6bf94c26911f4e32a62a9fb/AutoMerge/src/types.jl#L268-L285">source</a></section></details></article><h3 id="Configuration-Management"><a class="docs-heading-anchor" href="#Configuration-Management">Configuration Management</a><a id="Configuration-Management-1"></a><a class="docs-heading-anchor-permalink" href="#Configuration-Management" title="Permalink"></a></h3><article><details class="docstring" open="true"><summary id="AutoMerge.read_config"><a class="docstring-binding" href="#AutoMerge.read_config"><code>AutoMerge.read_config</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">read_config(path) -&gt; AutoMergeConfiguration</code></pre><p>Read an AutoMerge configuration from a TOML file.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaRegistries/RegistryCI.jl/blob/9fb6ad296dd970a3a6bf94c26911f4e32a62a9fb/AutoMerge/src/types.jl#L222-L226">source</a></section></details></article><article><details class="docstring" open="true"><summary id="AutoMerge.write_config"><a class="docstring-binding" href="#AutoMerge.write_config"><code>AutoMerge.write_config</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">write_config(path, config::AbstractConfiguration) -&gt; Nothing</code></pre><p>Write an AutoMerge configuration to a TOML file. Automatically handles serialization of <code>Dates.Minute</code> fields to integer values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaRegistries/RegistryCI.jl/blob/9fb6ad296dd970a3a6bf94c26911f4e32a62a9fb/AutoMerge/src/types.jl#L231-L235">source</a></section></details></article><h3 id="Basic-Usage"><a class="docs-heading-anchor" href="#Basic-Usage">Basic Usage</a><a id="Basic-Usage-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-Usage" title="Permalink"></a></h3><h4 id="Using-the-General-Registry-Configuration"><a class="docs-heading-anchor" href="#Using-the-General-Registry-Configuration">Using the General Registry Configuration</a><a id="Using-the-General-Registry-Configuration-1"></a><a class="docs-heading-anchor-permalink" href="#Using-the-General-Registry-Configuration" title="Permalink"></a></h4><p>For the General registry, you can use the pre-configured settings:</p><pre><code class="language-julia hljs">using AutoMerge

# Get the General registry configuration
config = AutoMerge.general_registry_config()

# For PR checking (runs untrusted code, minimal permissions)
AutoMerge.check_pr(config.registry_config, config.check_pr_config)

# For PR merging (elevated permissions, no untrusted code)
AutoMerge.merge_prs(config.registry_config, config.merge_prs_config)</code></pre><h4 id="Creating-a-Custom-Configuration"><a class="docs-heading-anchor" href="#Creating-a-Custom-Configuration">Creating a Custom Configuration</a><a id="Creating-a-Custom-Configuration-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-a-Custom-Configuration" title="Permalink"></a></h4><p>For a custom registry, create a TOML configuration file. This can be based on the one used by General:</p><pre><code class="language-toml hljs">[registry_config]
authorized_authors = [&quot;JuliaRegistrator&quot;]
registry = &quot;JuliaRegistries/General&quot;
api_url = &quot;https://api.github.com&quot;
new_package_waiting_minutes = 4320
authorized_authors_special_jll_exceptions = [&quot;jlbuild&quot;]
new_jll_version_waiting_minutes = 10
read_only = false
new_jll_package_waiting_minutes = 20
master_branch = &quot;master&quot;
error_exit_if_automerge_not_applicable = false
new_version_waiting_minutes = 10

[merge_prs_config]
additional_statuses = []
merge_new_packages = true
additional_check_runs = []
merge_token_name = &quot;AUTOMERGE_MERGE_TOKEN&quot;
merge_new_versions = true

[check_pr_config]
master_branch_is_default_branch = true
public_registries = [&quot;https://github.com/HolyLab/HolyLabRegistry&quot;, &quot;https://github.com/cossio/CossioJuliaRegistry&quot;]
environment_variables_to_pass = []
commit_status_token_name = &quot;AUTOMERGE_GITHUB_TOKEN&quot;
check_license = true
suggest_onepointzero = false
registry_deps = []
point_to_slack = true
check_breaking_explanation = true
</code></pre><p>We suggest the naming convention <code>$Registry.AutoMerge.toml</code>.</p><p>Then use the configuration:</p><pre><code class="language-julia hljs"># Load configuration
config = AutoMerge.read_config(&quot;MyRegistry.AutoMerge.toml&quot;)

# Use in CI workflows
AutoMerge.check_pr(config.registry_config, config.check_pr_config)
AutoMerge.merge_prs(config.registry_config, config.merge_prs_config)</code></pre><h3 id="Security-Considerations"><a class="docs-heading-anchor" href="#Security-Considerations">Security Considerations</a><a id="Security-Considerations-1"></a><a class="docs-heading-anchor-permalink" href="#Security-Considerations" title="Permalink"></a></h3><h4 id="GitHub-Token-Configuration"><a class="docs-heading-anchor" href="#GitHub-Token-Configuration">GitHub Token Configuration</a><a id="GitHub-Token-Configuration-1"></a><a class="docs-heading-anchor-permalink" href="#GitHub-Token-Configuration" title="Permalink"></a></h4><p>AutoMerge uses separate GitHub tokens with minimal required permissions:</p><table><tr><th style="text-align: right">Token</th><th style="text-align: right">Scopes Required</th><th style="text-align: right">Used By</th><th style="text-align: right">Purpose</th></tr><tr><td style="text-align: right"><code>commit_status_token_name</code></td><td style="text-align: right"><code>repo:status</code>, read PRs</td><td style="text-align: right"><code>check_pr</code></td><td style="text-align: right">Set commit statuses during PR validation</td></tr><tr><td style="text-align: right"><code>merge_token_name</code></td><td style="text-align: right"><code>pull_request:write</code>, <code>contents:write</code></td><td style="text-align: right"><code>merge_prs</code></td><td style="text-align: right">Merge approved PRs</td></tr></table><p><strong>Default values:</strong></p><ul><li><code>commit_status_token_name = &quot;AUTOMERGE_GITHUB_TOKEN&quot;</code></li><li><code>merge_token_name = &quot;AUTOMERGE_MERGE_TOKEN&quot;</code></li></ul><p>For General registry, these tokens are separated to follow the principle of least privilege: the PR checking job (which runs untrusted code) never has access to the merge token.</p><div class="admonition is-warning" id="Token-Security-5b4a20a69f6d6f9d"><header class="admonition-header">Token Security<a class="admonition-anchor" href="#Token-Security-5b4a20a69f6d6f9d" title="Permalink"></a></header><div class="admonition-body"><p>These fields store environment variable <strong>names</strong>, not token values. Never put actual tokens in configuration files.</p></div></div><h4 id="Separation-of-Privileges"><a class="docs-heading-anchor" href="#Separation-of-Privileges">Separation of Privileges</a><a id="Separation-of-Privileges-1"></a><a class="docs-heading-anchor-permalink" href="#Separation-of-Privileges" title="Permalink"></a></h4><p>The two-entrypoint design ensures that:</p><ol><li><strong>PR checking</strong> (<code>check_pr</code>) runs untrusted package code during validation but only has minimal GitHub permissions</li><li><strong>PR merging</strong> (<code>merge_prs</code>) has elevated GitHub permissions but never runs untrusted code</li></ol><p>This separation follows the principle of least privilege and reduces the attack surface.</p><h3 id="CI-Workflow-Integration"><a class="docs-heading-anchor" href="#CI-Workflow-Integration">CI Workflow Integration</a><a id="CI-Workflow-Integration-1"></a><a class="docs-heading-anchor-permalink" href="#CI-Workflow-Integration" title="Permalink"></a></h3><h4 id="GitHub-Actions-Example"><a class="docs-heading-anchor" href="#GitHub-Actions-Example">GitHub Actions Example</a><a id="GitHub-Actions-Example-1"></a><a class="docs-heading-anchor-permalink" href="#GitHub-Actions-Example" title="Permalink"></a></h4><pre><code class="language-yaml hljs">name: AutoMerge

on:
  schedule:
    - cron: &#39;05,17,29,41,53 * * * *&#39;
  pull_request:
    # opened = run when the PR is first opened
    # labeled = run when labels are applied, so that the &quot;Override AutoMerge: name similarity is okay label is respected.
    # synchronize = run when a commit is pushed to the PR
    types: [opened, labeled, synchronize]
  workflow_dispatch:

jobs:
  AutoMerge:
    # Run if the we are not triggered by a label OR we are triggered by a label, and that
    # label is one that affects the execution of the workflow
    # Note: since the label contains a colon, we need to use a workaround like https://github.com/actions/runner/issues/1019#issuecomment-810482716
    # for the syntax to parse correctly.
    if: &quot;${{ github.event.action != &#39;labeled&#39; || (github.event.action == &#39;labeled&#39; &amp;&amp; (github.event.label.name == &#39;Override AutoMerge: name similarity is okay&#39; || github.event.label.name == &#39;Override AutoMerge: package author approved&#39;)) }}&quot;
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        julia-version: [1.3.0]
        julia-arch: [x86]
        os: [ubuntu-latest]
    steps:
      - uses: actions/checkout@af513c7a016048ae468971c52ed77d9562c7c819 # v1.0.0
      - uses: julia-actions/setup-julia@082493e5c5d32c1fa68c35556429b0f1b2807453 # v1.0.1
        with:
          version: ${{ matrix.julia-version }}
      - name: Install dependencies by running Pkg.instantiate()
        run: julia --project=.ci/ -e &#39;using Pkg; Pkg.instantiate()&#39;
      - name: AutoMerge.pr_check
        env:
          AUTOMERGE_GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          AUTOMERGE_MERGE_TOKEN: ${{ secrets.TAGBOT_TOKEN }}
          JULIA_DEBUG: AutoMerge
        run: |
          config = AutoMerge.general_registry_config()
          AutoMerge.pr_check(config.registry_config, config.check_pr_config)
        shell: julia --color=yes --project=.ci/ {0}
</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../guidelines/">« Automatic merging guidelines</a><a class="docs-footer-nextpage" href="../private-registries/">Using RegistryCI on your own package registry »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.17.0 on <span class="colophon-date" title="Sunday 22 February 2026 19:53">Sunday 22 February 2026</span>. Using Julia version 1.12.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
