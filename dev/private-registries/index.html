<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Using RegistryCI on your own package registry · RegistryCI.jl</title><meta name="title" content="Using RegistryCI on your own package registry · RegistryCI.jl"/><meta property="og:title" content="Using RegistryCI on your own package registry · RegistryCI.jl"/><meta property="twitter:title" content="Using RegistryCI on your own package registry · RegistryCI.jl"/><meta name="description" content="Documentation for RegistryCI.jl."/><meta property="og:description" content="Documentation for RegistryCI.jl."/><meta property="twitter:description" content="Documentation for RegistryCI.jl."/><meta property="og:url" content="https://JuliaRegistries.github.io/RegistryCI.jl/private-registries/"/><meta property="twitter:url" content="https://JuliaRegistries.github.io/RegistryCI.jl/private-registries/"/><link rel="canonical" href="https://JuliaRegistries.github.io/RegistryCI.jl/private-registries/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">RegistryCI.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../guidelines/">Automatic merging guidelines</a></li><li><a class="tocitem" href="../regexes/">Regexes</a></li><li class="is-active"><a class="tocitem" href>Using RegistryCI on your own package registry</a><ul class="internal"><li><a class="tocitem" href="#Basic-configuration"><span>Basic configuration</span></a></li><li><a class="tocitem" href="#TagBot-triggers"><span>TagBot triggers</span></a></li><li><a class="tocitem" href="#AutoMerge-support"><span>AutoMerge support</span></a></li><li><a class="tocitem" href="#Note-regarding-private-registries"><span>Note regarding private registries</span></a></li><li><a class="tocitem" href="#Author-approval-workflow-support"><span>Author approval workflow support</span></a></li></ul></li><li><a class="tocitem" href="../public/">Public API</a></li><li><a class="tocitem" href="../internals/">Internals (Private)</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Using RegistryCI on your own package registry</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Using RegistryCI on your own package registry</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaRegistries/RegistryCI.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaRegistries/RegistryCI.jl/blob/master/docs/src/private-registries.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Using-RegistryCI-on-your-own-package-registry"><a class="docs-heading-anchor" href="#Using-RegistryCI-on-your-own-package-registry">Using RegistryCI on your own package registry</a><a id="Using-RegistryCI-on-your-own-package-registry-1"></a><a class="docs-heading-anchor-permalink" href="#Using-RegistryCI-on-your-own-package-registry" title="Permalink"></a></h1><p>In order to create and maintain a custom Julia registry, you can use <a href="https://github.com/GunnarFarneback/LocalRegistry.jl">LocalRegistry.jl</a>. After you have the registry configured, you can setup CI using RegistryCI by following how it is used in the <a href="https://github.com/JuliaRegistries/General">General registry</a>.</p><h2 id="Basic-configuration"><a class="docs-heading-anchor" href="#Basic-configuration">Basic configuration</a><a id="Basic-configuration-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-configuration" title="Permalink"></a></h2><p>You will first need to copy the <code>.ci</code> folder in the root of the General registry to the root of your own registry. This folder contains some resources required for the RegistryCI package to work and update itself. If you do not need AutoMerge support, there is no need to copy the <code>stopwatch.jl</code> file in the <code>.ci</code> folder.</p><p>Next, you will need to copy the <code>registry-consistency-ci.yml</code> and <code>update_manifest.yml</code> workflow files.</p><p>The <code>registry-consistency-ci.yml</code> file should be modified as follows if you have packages in your registry that depend on packages in the General registry. If the packages in your registry depend on packages in other registries, they should also be added to <code>registry_deps</code></p><pre><code class="language-diff hljs">- run: julia --project=.ci/ --color=yes -e &#39;import RegistryCI; RegistryCI.test()&#39;

+ run: julia --project=.ci/ --color=yes -e &#39;import RegistryCI; RegistryCI.test(registry_deps=[&quot;https://github.com/JuliaRegistries/General&quot;])&#39;</code></pre><p>You can optionally use the registry name instead of the URL:</p><pre><code class="language-diff hljs">- run: julia --project=.ci/ --color=yes -e &#39;import RegistryCI; RegistryCI.test()&#39;
+ run: julia --project=.ci/ --color=yes -e &#39;import RegistryCI; RegistryCI.test(registry_deps=[&quot;General&quot;])&#39;</code></pre><p>If Julia pkg server is available and recognized, then the Julia Pkg will try to download registry from it. This can be useful to reduce the unnecessary network traffic, for example, if you host a private pkg server in your local network(e.g., enterprise network with firewall) and properly set up the environment variable <code>JULIA_PKG_SERVER</code>, then the network traffic doesn&#39;t need to pass through the proxy to GitHub.</p><div class="admonition is-warning" id="Warning-890dfdd1bd564c55"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-890dfdd1bd564c55" title="Permalink"></a></header><div class="admonition-body"><p>Registry fetched from Julia pkg server currently has some observable latency(e.g., hours). Check <a href="https://github.com/JuliaRegistries/General/issues/16777">here</a> for more information.</p></div></div><p>The self-update mechanism mentioned above uses a <code>TAGBOT_TOKEN</code> secret in order to create a pull request with the update. This secret is a <a href="https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line#creating-a-token">personal access token</a> which must have the <code>repo</code> scope enabled. To create the repository secret follow the instructions <a href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions/creating-and-using-encrypted-secrets#creating-encrypted-secrets">here</a>. Use the name <code>TAGBOT_TOKEN</code> and the new PAT as the value.</p><h2 id="TagBot-triggers"><a class="docs-heading-anchor" href="#TagBot-triggers">TagBot triggers</a><a id="TagBot-triggers-1"></a><a class="docs-heading-anchor-permalink" href="#TagBot-triggers" title="Permalink"></a></h2><p>If you want to use TagBot in the packages that you register in your registry, you need to also copy the <code>TagBotTriggers.yml</code> file. That workflow file also needs the <code>TAGBOT_TOKEN</code> secret mentioned above. In the <code>TagBot.yml</code> workflows of the registered packages you will also need to add the <code>registry</code> input as stated in the <a href="https://github.com/JuliaRegistries/TagBot#custom-registries">TagBot readme</a></p><pre><code class="nohighlight hljs">with:
  token: ${{ secrets.GITHUB_TOKEN }}
  registry: MyOrg/MyRegistry</code></pre><h2 id="AutoMerge-support"><a class="docs-heading-anchor" href="#AutoMerge-support">AutoMerge support</a><a id="AutoMerge-support-1"></a><a class="docs-heading-anchor-permalink" href="#AutoMerge-support" title="Permalink"></a></h2><p>In order to enable automerge support, you will also have to copy the <code>automerge.yml</code> file and change the <code>AutoMerge</code> invocation appropriately</p><pre><code class="language-julia hljs">using AutoMerge
using Dates
AutoMerge.run(
    merge_new_packages = ENV[&quot;MERGE_NEW_PACKAGES&quot;] == &quot;true&quot;,
    merge_new_versions = ENV[&quot;MERGE_NEW_VERSIONS&quot;] == &quot;true&quot;,
    new_package_waiting_period = Day(3),
    new_jll_package_waiting_period = Minute(20),
    new_version_waiting_period = Minute(10),
    new_jll_version_waiting_period = Minute(10),
    registry = &quot;MyOrg/MyRegistry&quot;,
    tagbot_enabled = true,
    authorized_authors = String[&quot;TrustedUser&quot;],
    authorized_authors_special_jll_exceptions = String[&quot;&quot;],
    suggest_onepointzero = false,
    additional_statuses = String[],
    additional_check_runs = String[],
    check_license = true,
    check_breaking_explanation = true,
    public_registries = String[&quot;https://github.com/HolyLab/HolyLabRegistry&quot;],
)</code></pre><p>Most importantly, the following should be changed</p><pre><code class="nohighlight hljs">registry = &quot;MyOrg/MyRegistry&quot;,
authorized_authors = String[&quot;TrustedUser&quot;],</code></pre><p>You will also have to make the following change in <code>.ci/stopwatch.jl</code></p><pre><code class="language-diff hljs">- registry = GitHub.Repo(&quot;JuliaRegistries/General&quot;)
+ registry = GitHub.Repo(&quot;MyOrg/MyRegistry&quot;)</code></pre><h2 id="Note-regarding-private-registries"><a class="docs-heading-anchor" href="#Note-regarding-private-registries">Note regarding private registries</a><a id="Note-regarding-private-registries-1"></a><a class="docs-heading-anchor-permalink" href="#Note-regarding-private-registries" title="Permalink"></a></h2><p>In the case of a private registry, you might get permission errors when executing the <code>instantiate.sh</code> script. In that case you will also have to add the following</p><pre><code class="language-diff hljs">  - run: chmod 400 .ci/Project.toml
  - run: chmod 400 .ci/Manifest.toml
+ - run: chmod +x .ci/instantiate.sh</code></pre><p>in <code>registry-consistency-ci.yml</code> and also <code>TagBotTriggers.yml</code> and <code>automerge.yml</code> (in which the above appears twice) files if those features are used.</p><h2 id="Author-approval-workflow-support"><a class="docs-heading-anchor" href="#Author-approval-workflow-support">Author approval workflow support</a><a id="Author-approval-workflow-support-1"></a><a class="docs-heading-anchor-permalink" href="#Author-approval-workflow-support" title="Permalink"></a></h2><p>Some guidelines allow the person invoking registration (typically the package author) to &quot;approve&quot; AutoMerge even if the guideline is not passing. This is facilitated by a labelling workflow <code>author_approval.yml</code> that must run on the registry in order to translate author-approval comments into labels that AutoMerge can use. The <a href="https://github.com/JuliaRegistries/General/tree/master/.github/workflows">General registry&#39;s workflows</a> should once again be used as an example.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../regexes/">« Regexes</a><a class="docs-footer-nextpage" href="../public/">Public API »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Saturday 27 September 2025 01:25">Saturday 27 September 2025</span>. Using Julia version 1.11.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
